# `ReentrantLock`、`ReentrantReadWriteLock`、`StampedLock`


## `ReentrantReadWriteLock`

### 是什麼？

* 讀寫鎖：一個資源能被**多個線程**訪問，或者被**一個寫線程**訪問，但是不能同時存在讀寫線程。
* 演變：無鎖無序 -> 加鎖 -> 讀寫鎖 -> 郵戳鎖
* 讀寫鎖意義和特點
  * 他**只允許讀讀共存，而讀寫和寫寫依然是互斥的**，大多實際場景**是"讀/讀"線程間並不存在互斥關係**。只有"讀/寫"線程或"寫/寫"線程間的操作需要互斥的。因此引入`ReentrantReadWriteLock`。
  * 一個`ReentrantReadWriteLock`同時只能存在一個寫鎖但是可以存在多個讀鎖，但**不能同時存在寫鎖和讀鎖**。也即**一個資源可以被多個讀操作訪問或一個寫操作訪問，但兩者不能同時進行**。
  * 只有在**讀多寫少**情景下，讀寫鎖才具有較高的性能體現。

### 特點

* 可重入
* 讀寫兼顧
* 💡結論：**一體兩面，讀寫互斥，讀讀共享，讀沒有完成的時候其他線程寫鎖無法獲得**
* **鎖降級**：
