# 原理分析

## LongAdder爲什麼這麼快？
* LongAdder的基本思路就是**分散熱點**，將value值分散到一個**Cell數組**中，不同線程會命中到數組的不同槽中，各個線程只對自己槽中的那個值進行CAS操作，這樣熱點就被分散了，衝突的概率就會小很多。<br>
    如果要獲取真正的long值，只要將各個曹中的變量值累加返回。
* `sum()`會將所有Cell數組中的value和base累加作為返回值，核心的思路就是將之前AtomicLong的value的壓力分散到多個value中去，**從而降級更新熱點**。
* 內部有一個base變量，一個Cell[]數組
  ![img.png](img.png)
  * base變量：低並發，直接累加到該變量上
  * Cell[]數組：高並發，累加到各個線程自己的槽Cell[i]中